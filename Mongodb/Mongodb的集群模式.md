# Mongodb的几种集群模式

## Master-Slaver

主从复制模式，集群中只有一个主节点，主节点提供所有的增删改查服务，从节点只提供查询服务，这样可以减轻主节点的压力。

从节点需要知道主节点的地址，从节点定期轮询主节点获取这些操作，然后对自己的是数据副本执行这些操作，从而保证从节点与主节点数据的一致性。

当主节点出现故障时，只能人工介入，指定新的主节点，从节点不会自动升级为主节点，在此段时间内，该集群架构处于只读状态。

## Replica Set

当集群中的主节点发生故障时，副本集可以自动选票，选举出新的主节点，而这个过程对应用是透明的。主要解决主从复制不具备高可用的问题。

## Sharded Cluster

水平扩展：在上述的集群模式中，所以的数据都存储在每台机器的内存中，当数据量过大机器的内存不够时，可以采用分片模式，相当于把数据分散存储到多台机器上，自然
每台服务器的压力变得更小。

但是这里有一个问题，如果每台机器出问题的概率时p，那么n台机器出问题的概率则是p*n，如果不做高可用的设计，那么集群出问题的概率和机器的数量成正比，这是
不可接受的，所以关于这点每片我们可以采用Replica Set进行部署，这样可以完美的解决这个问题。